(()=>{"use strict";var e,t={318:()=>{const e=window.wp.element,{Component:t,Fragment:l}=wp.element,{Spinner:a,SelectControl:s,PanelBody:r,RangeControl:o}=wp.components,{InspectorControls:n}=wp.blockEditor,{withSelect:p}=wp.data,{__}=wp.i18n,i=({props:t})=>{const{result:l}=t;return l?0===l.length?(0,e.createElement)("div",null,__("No posts were found...","dbm-blocks")):l.map((t=>{const{id:l,title:a,thumbnail:s,excerpt:r,post_date:o}=t,n=s||FALLBACK_IMG;return(0,e.createElement)("div",{key:l,className:"latest-item"},(0,e.createElement)("div",{className:"latest-image"},(0,e.createElement)("img",{src:n,alt:a})),(0,e.createElement)("div",{className:"latest-content"},(0,e.createElement)("span",{className:"title"},a),(0,e.createElement)("div",{className:"excerpt"},r," …続きを読む"),o&&(0,e.createElement)("div",{className:"post_date"},o)))})):(0,e.createElement)("div",null,__("Loading...","dbm-blocks")," ",(0,e.createElement)(a,null))},c=p(((e,t)=>{var l,a;const{category:s,posts_per_page:r,order:o,selectedPost:n,postTaxonomy:p}=t.attributes,i=null!==(l=e("core").getPostTypes({per_page:-1,public:1}))&&void 0!==l?l:[];i.forEach((e=>{e.slug===n&&t.setAttributes({postTaxonomy:e.taxonomies[0]})}));const c=i.map((e=>({label:e.labels.name,value:e.slug}))),m=null!==(a=e("core").getEntityRecords("taxonomy",p,{per_page:-1,hide_empty:!0}))&&void 0!==a?a:[];let d=null;if(n){let t={per_page:r||12,order:o||"desc",orderby:"id",_embed:!0};s&&(t.categories=[s]);const l=e("core").getEntityRecords("postType",n,t);l&&(l.length>0?(d=[],l.forEach((e=>{d.push({id:e.id,title:e.title.rendered,thumbnail:e._embedded["wp:featuredmedia"]?e._embedded["wp:featuredmedia"][0].source_url:null,excerpt:e.excerpt.raw?u(e.excerpt.raw,10):null})}))):d=[])}return{categories:m,postTaxonomy:p,postTypeData:c,result:d}}))(class extends t{render(){const{attributes:{category:t,posts_per_page:a,order:p,image_size:c,selectedPost:u,postTaxonomy:m},categories:d,postTypeData:g,className:b}=this.props;let v=[];if(g){v.push({value:0,label:"Select a post"});const e=["page","attachment","nav_menu_item","wp_block","wp_template","wp_template_part","wp_navigation"];g.forEach((t=>{e.includes(t.value)||v.push({value:t.value,label:t.label})}))}else v.push({value:0,label:"Loading..."});let h=[];return d&&d.length>0?(h.push({value:0,label:"All"}),d.forEach((e=>{h.push({value:e.id,label:e.name})}))):h.push({value:"0",label:"Category not available"}),(0,e.createElement)(l,null,(0,e.createElement)(n,null,(0,e.createElement)(r,{title:"Select Post Type"},(0,e.createElement)(s,{label:"Select Post Type",value:u||"0",options:v,onChange:e=>this.props.setAttributes({selectedPost:e,category:0})})),(0,e.createElement)(r,null,(0,e.createElement)(s,{label:"Select category",value:t,options:h,onChange:e=>this.props.setAttributes({category:parseInt(e),postTaxonomy:m})})),(0,e.createElement)(r,{title:"Parameter Settings"},(0,e.createElement)(o,{value:a||12,label:"Number of posts",min:0,max:50,initialPosition:12,allowReset:!0,onChange:e=>this.props.setAttributes({posts_per_page:e})}),(0,e.createElement)(s,{label:"Order By",value:p||"desc",options:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc",selected:!0}],onChange:e=>this.props.setAttributes({order:e})})),(0,e.createElement)(r,{title:"Image Settings"},(0,e.createElement)(s,{label:"Image Size",value:c||"medium",options:[{label:"Thumbnail",value:"thumbnail"},{label:"Medium",value:"medium"},{label:"Large",value:"large"},{label:"Full",value:"full"}],onChange:e=>this.props.setAttributes({image_size:e})}))),(0,e.createElement)("div",{className:b},(0,e.createElement)("div",{className:"latest-wrapper"},u?(0,e.createElement)(i,{props:this.props}):"Select post please")))}}),u=(e,t)=>{const l=e.split(" ");let a="";t=t<l.length?t:l.length;for(let e=0;e<t;e++)a+=l[e]+" ";return a+"..."};window.wp.blockEditor;const m=JSON.parse('{"u2":"fynx-blocks/latest-cpt-posts","W3":"design","qv":"universal-access-alt","Y4":{"selectedPost":{"type":"string"},"postTaxonomy":{"type":"string"},"category":{"type":"integer"},"posts_per_page":{"type":"number"},"order":{"type":"string"},"image_size":{"type":"string"}}}'),{__:d}=wp.i18n,{registerBlockType:g}=wp.blocks;g(m.u2,{title:d("FYNXWP: Latest posts"),description:d("Display a list of your most recent posts including custom post types."),icon:m.qv,category:m.W3,keywords:[d("Recent posts"),d("Latest post")],attributes:m.Y4,edit:c,save:function(e){return null}})}},l={};function a(e){var s=l[e];if(void 0!==s)return s.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,l,s,r)=>{if(!l){var o=1/0;for(c=0;c<e.length;c++){for(var[l,s,r]=e[c],n=!0,p=0;p<l.length;p++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](l[p])))?l.splice(p--,1):(n=!1,r<o&&(o=r));if(n){e.splice(c--,1);var i=s();void 0!==i&&(t=i)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[l,s,r]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var s,r,[o,n,p]=l,i=0;if(o.some((t=>0!==e[t]))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(p)var c=p(a)}for(t&&t(l);i<o.length;i++)r=o[i],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},l=globalThis.webpackChunklatest_cpt_posts=globalThis.webpackChunklatest_cpt_posts||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var s=a.O(void 0,[431],(()=>a(318)));s=a.O(s)})();